Database 6
================
简介
------------
Database 6 是一个指令驱动的简易数据库，是对前一版本 Database 5 的重构和优化。

指令
------------
Database 6 通过 **指令** 来实现与用户的交互。绝大多数的指令采用如下语法：
> *指令名* *键值对1* *键值对2* ... *键值对n* *标签1* *标签2*... *标签n*

*键值对* 可以展开为如下格式：
> *键* *值*

键值对作为一个整体，可以与其他键值对或标签交换顺序，只要键值对内部的顺序不变，指令就依然合法且含义不变。例如：
```
add-field name "Hello World" constr "value>0" unique
```
指令中的`add-field`是指令名，`name "Hello World"`和`constr "value>0"`是键值对，`unique`是标签。根据上面的规则，这条指令与如下指令相等价。
```
add-field unique constr "value>0" name "Hello World" 
```
简洁起见，下面的指令只列出一种可行的排列顺序。

少数指令采用另一种语法：
> *指令名* *参数1* *参数2* ... *参数n*

例如:
```
add-record 0 1 "Hi"
```

指令名和键统称 **关键字** ，关键字不需要引号包裹。对于非关键
字，则分为两种情况：
- 数字型非关键字可以不用引号，例如：`1`、`3.14`、`-41`。
- 字符串型非关键字必须使用引号，例如：`"Hello world"`、`"你好"`。
  如果字符串中出现引号，则用`\"`表示。例如：`"value(\"year\")==2020"`

字段
----------
字段是数据库的列，每一个字段都具有五个属性：**字段名**、**约束**、**格式**、**唯一性** 和 **提示信息**。

字段名是字段的唯一标识符，不可为空，不可与其他字段重复。
 
约束是字段中的数据必须满足的表达式。不满足此表达式的数据无法被输入数据库中；字段的约束也无法设置为其中已有数据不满足的表达式。约束为空的字段可以接受任何数据。

格式是数据显示时计算的表达式，计算的结果会替代数据原值被显示。格式为空时，数据原值会被显示。

唯一性是一个布尔值（真或假），唯一性为真的字段不接受重复的数据。字段中存在重复数据时也不能将字段唯一性修改为真。

提示信息是对字段的注释，方便录入人员理解字段的含义和要求。

添加字段
------------
用`add-field`指令添加字段。语法如下:
> add-field <name *字段名*> [constr *约束*] [format *格式*] [info *提示信息*] [unique]

（尖括号`<>`中的项目必选，方括号`[]`中可选，*斜体*为占位符，后同）

可选的项目如果省略，表示对应的字段属性为空（或假），例如：
```
add-field name "得分" constr "value>=0&&value<=100" format "value+\"分\""
```
这条指令将创建一个名为“得分”的字段。该字段限制数据必须是一个在0-100之间的数字，且显示时会给数字加上“分”字。没有`unique`标签，说明字段中可以包含重复数据。

列出字段
------------
用list-field指令列出全部字段信息。语法如下：
> list-field

更新字段
------------
用update-field指令更新字段的属性。语法如下：
> update-field <name *字段名*> [set-name *新字段名*] [set-constr *新约束*|disable-constr] [set-format *新格式*|disable-format] [set-info *新提示信息*|disable-info] [set-unique *新唯一性*|disable-unique]

（`|`表示二选一）

方括号`[]`中的`set-X Y`键值对表示将字段的X属性修改为Y，而与之相对的`disable-X`标签表示将字段的X属性设置为空（或假）。对于每个不同的属性X，`set-X Y`和`disable-X`只能出现其一。特别地，`set-unique false`和`disable-unique`是等价的。
